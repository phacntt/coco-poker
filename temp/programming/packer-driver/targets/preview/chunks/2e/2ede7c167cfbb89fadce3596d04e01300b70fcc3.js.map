{"version":3,"sources":["file:///Users/apple/Documents/Dads/coco-poker/node_modules/axios/lib/helpers/toFormData.js"],"names":["isVisitable","thing","utils","isPlainObject","isArray","removeBrackets","key","endsWith","slice","renderKey","path","dots","concat","map","each","token","i","join","isFlatArray","arr","some","toFormData","obj","formData","options","isObject","TypeError","PlatformFormData","FormData","toFlatObject","metaTokens","indexes","defined","option","source","isUndefined","visitor","defaultVisitor","_Blob","Blob","useBlob","isSpecCompliantForm","isFunction","convertValue","value","isDate","toISOString","isBlob","AxiosError","isArrayBuffer","isTypedArray","Buffer","from","JSON","stringify","isFileList","toArray","forEach","el","index","append","stack","exposedHelpers","Object","assign","predicates","build","indexOf","Error","push","result","call","isString","trim","pop","filter","prop","test"],"mappings":"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","sourcesContent":["'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n"]}