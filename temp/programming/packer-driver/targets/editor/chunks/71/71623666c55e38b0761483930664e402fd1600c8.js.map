{"version":3,"sources":["file:///Users/apple/Documents/Dads/coco-poker/node_modules/delayed-stream/lib/delayed_stream.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","url","define","exports","require","module","__filename","__dirname","Stream","util","DelayedStream","source","dataSize","maxDataSize","pauseStream","_maxDataSizeExceeded","_released","_bufferedEvents","inherits","create","options","delayedStream","option","realEmit","emit","_handleEmit","arguments","apply","on","pause","Object","defineProperty","prototype","configurable","enumerable","get","readable","setEncoding","resume","release","forEach","args","bind","pipe","r","length","_checkIfMaxDataSizeExceeded","push","message","Error","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from 'stream';\nimport { __cjsMetaURL as _req0} from 'util';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var Stream = require('stream').Stream;\n var util = require('util');\n\n module.exports = DelayedStream;\n function DelayedStream() {\n   this.source = null;\n   this.dataSize = 0;\n   this.maxDataSize = 1024 * 1024;\n   this.pauseStream = true;\n\n   this._maxDataSizeExceeded = false;\n   this._released = false;\n   this._bufferedEvents = [];\n }\n util.inherits(DelayedStream, Stream);\n\n DelayedStream.create = function(source, options) {\n   var delayedStream = new this();\n\n   options = options || {};\n   for (var option in options) {\n     delayedStream[option] = options[option];\n   }\n\n   delayedStream.source = source;\n\n   var realEmit = source.emit;\n   source.emit = function() {\n     delayedStream._handleEmit(arguments);\n     return realEmit.apply(source, arguments);\n   };\n\n   source.on('error', function() {});\n   if (delayedStream.pauseStream) {\n     source.pause();\n   }\n\n   return delayedStream;\n };\n\n Object.defineProperty(DelayedStream.prototype, 'readable', {\n   configurable: true,\n   enumerable: true,\n   get: function() {\n     return this.source.readable;\n   }\n });\n\n DelayedStream.prototype.setEncoding = function() {\n   return this.source.setEncoding.apply(this.source, arguments);\n };\n\n DelayedStream.prototype.resume = function() {\n   if (!this._released) {\n     this.release();\n   }\n\n   this.source.resume();\n };\n\n DelayedStream.prototype.pause = function() {\n   this.source.pause();\n };\n\n DelayedStream.prototype.release = function() {\n   this._released = true;\n\n   this._bufferedEvents.forEach(function(args) {\n     this.emit.apply(this, args);\n   }.bind(this));\n   this._bufferedEvents = [];\n };\n\n DelayedStream.prototype.pipe = function() {\n   var r = Stream.prototype.pipe.apply(this, arguments);\n   this.resume();\n   return r;\n };\n\n DelayedStream.prototype._handleEmit = function(args) {\n   if (this._released) {\n     this.emit.apply(this, args);\n     return;\n   }\n\n   if (args[0] === 'data') {\n     this.dataSize += args[1].length;\n     this._checkIfMaxDataSizeExceeded();\n   }\n\n   this._bufferedEvents.push(args);\n };\n\n DelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n   if (this._maxDataSizeExceeded) {\n     return;\n   }\n\n   if (this.dataSize <= this.maxDataSize) {\n     return;\n   }\n\n   this._maxDataSizeExceeded = true;\n   var message =\n     'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n   this.emit('error', new Error(message));\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, () => ({\n  'stream': _req,\n  'util': _req0,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}