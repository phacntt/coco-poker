{"version":3,"sources":["file:///Users/apple/Documents/Dads/coco-poker/node_modules/combined-stream/lib/combined_stream.js"],"names":["_cjsLoader","_req","__cjsMetaURL","_req0","_req1","url","define","exports","require","module","__filename","__dirname","util","Stream","DelayedStream","CombinedStream","writable","readable","dataSize","maxDataSize","pauseStreams","_released","_streams","_currentStream","_insideLoop","_pendingNext","inherits","create","options","combinedStream","option","isStreamLike","stream","Buffer","isBuffer","prototype","append","newStream","Infinity","pauseStream","on","_checkDataSize","bind","_handleErrors","pause","push","pipe","dest","call","resume","_getNext","_realGetNext","shift","end","_pipeNext","getStream","value","write","self","err","_emitError","data","emit","_reset","destroy","_updateDataSize","message","Error","forEach","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nimport { __cjsMetaURL as _req} from 'util';\nimport { __cjsMetaURL as _req0} from 'stream';\nimport { __cjsMetaURL as _req1} from 'delayed-stream';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n var util = require('util');\n var Stream = require('stream').Stream;\n var DelayedStream = require('delayed-stream');\n\n module.exports = CombinedStream;\n function CombinedStream() {\n   this.writable = false;\n   this.readable = true;\n   this.dataSize = 0;\n   this.maxDataSize = 2 * 1024 * 1024;\n   this.pauseStreams = true;\n\n   this._released = false;\n   this._streams = [];\n   this._currentStream = null;\n   this._insideLoop = false;\n   this._pendingNext = false;\n }\n util.inherits(CombinedStream, Stream);\n\n CombinedStream.create = function(options) {\n   var combinedStream = new this();\n\n   options = options || {};\n   for (var option in options) {\n     combinedStream[option] = options[option];\n   }\n\n   return combinedStream;\n };\n\n CombinedStream.isStreamLike = function(stream) {\n   return (typeof stream !== 'function')\n     && (typeof stream !== 'string')\n     && (typeof stream !== 'boolean')\n     && (typeof stream !== 'number')\n     && (!Buffer.isBuffer(stream));\n };\n\n CombinedStream.prototype.append = function(stream) {\n   var isStreamLike = CombinedStream.isStreamLike(stream);\n\n   if (isStreamLike) {\n     if (!(stream instanceof DelayedStream)) {\n       var newStream = DelayedStream.create(stream, {\n         maxDataSize: Infinity,\n         pauseStream: this.pauseStreams,\n       });\n       stream.on('data', this._checkDataSize.bind(this));\n       stream = newStream;\n     }\n\n     this._handleErrors(stream);\n\n     if (this.pauseStreams) {\n       stream.pause();\n     }\n   }\n\n   this._streams.push(stream);\n   return this;\n };\n\n CombinedStream.prototype.pipe = function(dest, options) {\n   Stream.prototype.pipe.call(this, dest, options);\n   this.resume();\n   return dest;\n };\n\n CombinedStream.prototype._getNext = function() {\n   this._currentStream = null;\n\n   if (this._insideLoop) {\n     this._pendingNext = true;\n     return; // defer call\n   }\n\n   this._insideLoop = true;\n   try {\n     do {\n       this._pendingNext = false;\n       this._realGetNext();\n     } while (this._pendingNext);\n   } finally {\n     this._insideLoop = false;\n   }\n };\n\n CombinedStream.prototype._realGetNext = function() {\n   var stream = this._streams.shift();\n\n\n   if (typeof stream == 'undefined') {\n     this.end();\n     return;\n   }\n\n   if (typeof stream !== 'function') {\n     this._pipeNext(stream);\n     return;\n   }\n\n   var getStream = stream;\n   getStream(function(stream) {\n     var isStreamLike = CombinedStream.isStreamLike(stream);\n     if (isStreamLike) {\n       stream.on('data', this._checkDataSize.bind(this));\n       this._handleErrors(stream);\n     }\n\n     this._pipeNext(stream);\n   }.bind(this));\n };\n\n CombinedStream.prototype._pipeNext = function(stream) {\n   this._currentStream = stream;\n\n   var isStreamLike = CombinedStream.isStreamLike(stream);\n   if (isStreamLike) {\n     stream.on('end', this._getNext.bind(this));\n     stream.pipe(this, {end: false});\n     return;\n   }\n\n   var value = stream;\n   this.write(value);\n   this._getNext();\n };\n\n CombinedStream.prototype._handleErrors = function(stream) {\n   var self = this;\n   stream.on('error', function(err) {\n     self._emitError(err);\n   });\n };\n\n CombinedStream.prototype.write = function(data) {\n   this.emit('data', data);\n };\n\n CombinedStream.prototype.pause = function() {\n   if (!this.pauseStreams) {\n     return;\n   }\n\n   if(this.pauseStreams && this._currentStream && typeof(this._currentStream.pause) == 'function') this._currentStream.pause();\n   this.emit('pause');\n };\n\n CombinedStream.prototype.resume = function() {\n   if (!this._released) {\n     this._released = true;\n     this.writable = true;\n     this._getNext();\n   }\n\n   if(this.pauseStreams && this._currentStream && typeof(this._currentStream.resume) == 'function') this._currentStream.resume();\n   this.emit('resume');\n };\n\n CombinedStream.prototype.end = function() {\n   this._reset();\n   this.emit('end');\n };\n\n CombinedStream.prototype.destroy = function() {\n   this._reset();\n   this.emit('close');\n };\n\n CombinedStream.prototype._reset = function() {\n   this.writable = false;\n   this._streams = [];\n   this._currentStream = null;\n };\n\n CombinedStream.prototype._checkDataSize = function() {\n   this._updateDataSize();\n   if (this.dataSize <= this.maxDataSize) {\n     return;\n   }\n\n   var message =\n     'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n   this._emitError(new Error(message));\n };\n\n CombinedStream.prototype._updateDataSize = function() {\n   this.dataSize = 0;\n\n   var self = this;\n   this._streams.forEach(function(stream) {\n     if (!stream.dataSize) {\n       return;\n     }\n\n     self.dataSize += stream.dataSize;\n   });\n\n   if (this._currentStream && this._currentStream.dataSize) {\n     this.dataSize += this._currentStream.dataSize;\n   }\n };\n\n CombinedStream.prototype._emitError = function(err) {\n   this._reset();\n   this.emit('error', err);\n };\n\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, () => ({\n  'util': _req,\n  'stream': _req0,\n  'delayed-stream': _req1,\n}));\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}